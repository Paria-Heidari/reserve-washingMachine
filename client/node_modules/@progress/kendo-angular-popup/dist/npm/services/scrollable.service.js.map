{"version":3,"file":"scrollable.service.js","sources":["/Users/paria/workspace/washIt/client/node_modules/@progress/kendo-angular-popup/dist/npm/services/scrollable.service.js"],"sourcesContent":["/**-----------------------------------------------------------------------------------------\n* Copyright Â© 2021 Progress Software Corporation. All rights reserved.\n* Licensed under commercial license. See LICENSE.md in the project root for more information\n*-------------------------------------------------------------------------------------------*/\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"@angular/core\");\nvar rxjs_1 = require(\"rxjs\");\nvar operators_1 = require(\"rxjs/operators\");\nvar kendo_angular_common_1 = require(\"@progress/kendo-angular-common\");\nvar dom_service_1 = require(\"./dom.service\");\nvar util_1 = require(\"../util\");\n/**\n * @hidden\n */\nexports.THRESHOLD_DIFF = 1;\n/**\n * @hidden\n */\nvar ScrollableService = /** @class */ (function () {\n    function ScrollableService(_dom, _zone) {\n        this._dom = _dom;\n        this._zone = _zone;\n    }\n    ScrollableService.prototype.forElement = function (element) {\n        this.unsubscribe();\n        this.element = element;\n        return this;\n    };\n    ScrollableService.prototype.subscribe = function (callback) {\n        var _this = this;\n        if (!callback || !kendo_angular_common_1.isDocumentAvailable() || !this.element) {\n            return;\n        }\n        var nativeElement = this._dom.nativeElement(this.element);\n        var parents = this._dom.scrollableParents(this.element);\n        this._zone.runOutsideAngular(function () {\n            var observables = parents.map(function (p) { return rxjs_1.fromEvent(p, \"scroll\").pipe(operators_1.auditTime(util_1.FRAME_DURATION)); });\n            var subscriber = function (e) {\n                var target = e.target;\n                var isParent = parents.filter(function (p) { return p === target; }).length > 0;\n                var isDocument = target === document;\n                var isWindow = target === window;\n                if (isParent || isDocument || isWindow) {\n                    callback(_this.isVisible(nativeElement, target));\n                }\n            };\n            _this.subscription = rxjs_1.merge.apply(void 0, observables).subscribe(subscriber);\n        });\n    };\n    ScrollableService.prototype.unsubscribe = function () {\n        if (!this.subscription) {\n            return;\n        }\n        this.subscription.unsubscribe();\n    };\n    ScrollableService.prototype.isVisible = function (elem, container) {\n        var elemRect = this._dom.boundingOffset(elem);\n        var containerRect = this._dom.boundingOffset(container);\n        if (exports.THRESHOLD_DIFF < (containerRect.top - elemRect.bottom)) {\n            return false;\n        }\n        if (exports.THRESHOLD_DIFF < (elemRect.top - containerRect.bottom)) {\n            return false;\n        }\n        if (exports.THRESHOLD_DIFF < (elemRect.left - containerRect.right)) {\n            return false;\n        }\n        if (exports.THRESHOLD_DIFF < (containerRect.left - elemRect.right)) {\n            return false;\n        }\n        return true;\n    };\n    ScrollableService = tslib_1.__decorate([\n        core_1.Injectable(),\n        tslib_1.__metadata(\"design:paramtypes\", [dom_service_1.DOMService, core_1.NgZone])\n    ], ScrollableService);\n    return ScrollableService;\n}());\nexports.ScrollableService = ScrollableService;\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;AAoBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4CAsD4C,AAChB;;;;;;oMAEF;;;;"}